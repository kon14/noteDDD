output:
  - failure
pre-commit:
  parallel: true
  commands:
    cargo_fmt_check:
      run: |
        echo "‚úçÔ∏è Checking your messed up code formatting..."
        cargo fmt -- --check
    sqlx_prepare_check:
      run: |
        if [ -f .env ]; then
          export $(grep -v '^#' .env | xargs)
        fi
        if [ -z "$DATABASE_URL" ]; then
          echo "‚ùå ERROR: DATABASE_URL is not set. Please set it in your environment or .env file."
          exit 1
        fi
        echo "üßê Checking SQLx query cache..."
        cargo sqlx prepare --check --workspace
